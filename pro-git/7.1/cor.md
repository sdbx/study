# 7.1 리비전 선택

## 학습목표
- 리비전을 선택하는 문법에 대해 학습한다.

## 들어가며
- 지금까지 깃의 많은 부분을 학습하였음.
- 이제부터 배울 것은 깃의 고급 기능으로 강력한 힘을 갖추고 있음.

## 리비전 선택법
다음을 여러가지 방법으로 지칭할 수 있음.
- 하나의 커밋
- 커밋의 범위

### 단일 리비전
1. 임의의 커밋의 **전체 40자리 SHA-1 해시값**으로 해당 커밋을 지칭 가능   # full sha-1 hash
2. 적어도 4자리 이상의 애매모호하지 않은 **부분적 해시값**   # short sha-1
   - 8~10자리면 충분
   - 해시가 충돌할 가능성은 상당히 낮음
3. 브랜치명 = 브랜치의 끝에 있는 커밋   # branch reference
4. `@{}` 문법   # reflog shortname
   - HEAD@{5} => 현재 HEAD의 위치(0번)에서 5번째 이전 위치
   - master@{yesterday} => master 브랜치가 어제 어디에 있었는지
   - 단, 내 reflog에 들어있는 데이터에 대해서만 가능
   - 파워쉘을 쓸 경우 중괄호는 특수문자이므로 escape하거나 전체를 quote해야함
5. `ref^[num]` 문법   # ancestry reference
   - ref가 나타내는 커밋의 부모를 의미 (num을 명시하여 다수의 부모커밋중 하나를 지정 가능)
   - ^ 문자의 이름은 캐럿(caret)
   - 윈도우에서 캐럿은 특문이므로 escape하거나 전체를 quote해야함
   - num을 명시하는 것은 merge commit에 대해서만 유용함.
      - 머지커밋의 첫번째 부모는 내가 머지했을때 위치했던 브랜치로부터 온다.
      - 두번째 부모는 병합된 브랜치로부터 온다.
6. `ref~[num]` 문법   # ancestry reference
   - ~ 역시 ^과 마찬가지로 부모 커밋을 의미 (따라서 ref^와 ref~는 동일)
   - num에 명시한 횟수만큼 첫번째 부모를 타고 올라감 (즉 ~2는 첫번째 부모의 첫번째 부모를 의미)
   - ref~3 대신 ref~~~ 로 작성할수도 있음
   - ref~3^2 처럼 작성하는 것도 가능 (그 의미는 ref~3의 두번째 부모커밋)
   - ~ 문자의 이름은 틸데 (영어 발음은 틸더)

### 커밋 범위
- 커밋의 범위를 지정할 수 있는 문법
- 브랜치를 관리할 때 유용 => 이 브랜치에 있는 메인에 아직 병합하지 않은 작업은 무엇인가?

1. A..B   # double dot
   - **B에서는 도달가능하나 A에서는 도달가능하지 않은 모든 커밋**을 의미
   - 한쪽을 비워두면 HEAD가 생략된 것이라고 git은 이해함
   - (예시) origin/master..HEAD => 현재 브랜치에는 있는데 origin/master에는 없는 커밋들
2. ^ref 혹은 --not ref
   - double dot 문법의 확장이랄까?
   - 도달가능한 커밋을 보고싶지 않은 레퍼런스 앞에 ^나 --not을 붙인다
   - 즉, A..B == ^A B == B --not A
   - (예시) A B ^C == A B --not C => A나 B에서는 도달가능하지만 C로부터는 도달할 수 없는 커밋들
3. P...Q   # triple dot
   - A나 B에서는 도달가능하지만 A와 B가 동시에 도달할 수 없는 커밋들 => 즉, A나 B에는 있지만 A와 B의 공통 레퍼런스는 제외

## 새롭게 알게 된 명령어
- git show <commit> => 해당 커밋의 내용 출력
- git rev-parse <branch> => 브랜치가 가리키고 있는 커밋의 SHA-1 출력
- git reflog => HEAD와 브랜치 레퍼런스가 어디에 있었는지를 보여준다.
   - reflog는 임시 히스토리로 몇달동안의 이력만 보관하는 듯함
   - reflog는 로컬에 있는 것이며 내가 내 레포지토리에서 뭘 했는지만을 나타낸다.
   - git log -g 옵션을 주면 reflog 정보를 볼 수 있음
- git log P...Q --left-right => 각각의 커밋이 어떤 범위에 속하는지 표시 (좌측, 우측)

## 영어 공부
- harness: (동력원 등으로) 이용하다
- sizable: 상당한 크기의
- happenstance: 우연
- what then?: 그 다음에 어떻게 된다는 거야?
- organic[올개닉]: 서서히 생기는, 자연스러운
- resilient[리질리언트]: 회복력 있는
- work away: 계속 일하다
- ancestry: 가계, 혈통